# ASM Frame.merge Error - Minimal Test Case

## Problem
io/pipe.t and ~10-20 other tests fail with:
```
java.lang.NegativeArraySizeException: -1
	at org.objectweb.asm.Frame.merge(Frame.java:1233)
```

## Minimal Reproduction

```perl
$SIG{ALRM} = sub { return };
my $wait = wait;
```

That's it! Just these two lines cause the ASM Frame.merge error.

## Analysis

The issue occurs when:
1. Assigning an anonymous subroutine to a hash element (`$SIG{ALRM}`)
2. Followed by calling a builtin function (`wait`) that assigns to a lexical variable

## What Works

These variations work fine:
```perl
# Without the anonymous sub assignment
my $wait = wait;  # OK

# Without the wait call
$SIG{ALRM} = sub { return };  # OK

# With both but in separate scopes
{ $SIG{ALRM} = sub { return }; }
{ my $wait = wait; }  # OK
```

## Root Cause Hypothesis

The bytecode generation for the anonymous sub creates some state that
conflicts with the bytecode for the `wait` call + lexical assignment.
This causes ASM's frame computation to calculate -1 for an array size.

Likely issues:
1. Stack state inconsistency between the two operations
2. Local variable slot allocation conflict
3. Control flow graph issue in the generated bytecode

## Next Steps

1. Use `--disassemble` to examine the generated bytecode (if it gets that far)
2. Use ASM's CheckClassAdapter to validate bytecode before Frame.merge
3. Debug the bytecode generation for hash assignment + anonymous sub
4. Debug the bytecode generation for wait + lexical assignment
5. Check if there's a local variable slot conflict

## Test File

Saved in `/tmp/pipe_minimal.t` for debugging.
